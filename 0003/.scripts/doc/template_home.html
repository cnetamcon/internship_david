<!doctype html>
<html>
<style>
  html {
    margin: 0;
    padding: 0;
    height: 100%;
  }

  body {
    margin: 0;
    padding: 0;
    height: 100%;
  }

  main {
    display: grid;
    grid-template-areas: "left-menu content";
    grid-template-columns: 180px 1fr;
    margin-left: auto;
    margin-right: auto;
    max-width: 1200px;
    height: 100%;
  }

  .grid-left-menu {
    grid-area: left-menu;
    height: 100%;
    overflow-y: scroll;
  }

  .grid-content {
    grid-area: content;
    position: relative;
    overflow: auto;
  }

  .left-menu {
    margin: 0;
  }

  .left-menu-item {
    background-color: #00000066;
    padding: 4px;
    margin: 2px;
    cursor: pointer;
  }

  .left-menu-item:hover {
    background-color: #00000033;
  }

  .left-menu-item-selected {
    background-color: bisque;
  }

  .main-content {
    margin: 0;
    padding: 0;
    height: 98%;
  }

  iframe {
    min-height: 100%;
    min-width: 100%;
    border: 0;
    margin: 0;
  }

  .toggle::before {
    content: ">"
  }

  .toggle.active::before {
    content: "v"
  }

  .toggle + div {
    margin-left: 20px;
  }

  .toggle:not(.active) + div {
    display: none;
  }
</style>

<body>
  <main>
    <div class="grid-left-menu">
      <div class="left-menu">
        <div class="left-menu-item button" data-page="home.html">Home</div>
        <div class="left-menu-item toggle">Versions</div>
        <div id="versionscontainer"></div>
        <div class="left-menu-item toggle">Wiki</div>
        <div id="wikicontainer"></div>
      </div>
    </div>
    <div class="grid-content">
      <div id="maincontent" class="main-content"></div>
    </div>
  </main>
  <script>
    let versions = [files]; // will be replaced with script
    const current_version = "v3.9.2.0"; // will be replaced with script

    let selected_page = undefined;
    let versions_container = document.getElementById('versionscontainer');
    let wiki_container = document.getElementById('wikicontainer');

    // add version pages
    for (let i = 0; i < versions.length; i++) {
      let element = document.createElement("div");
      let page = "versions/" + versions[i];

      element.innerHTML = versions[i];
      element.classList.add('left-menu-item');
      element.classList.add('button');
      element.dataset.page = page;

      if (versions[i] === current_version) {
        element.innerHTML += " (current)";
      }

      versions_container.appendChild(element);
    }

    // add wiki pages
    // ...

    // add functionality to toggles
    for (const toggle of document.getElementsByClassName('toggle')) {
      toggle.addEventListener('click', function () {
        if (toggle.classList.contains('active')) 
          toggle.classList.remove('active');
        else toggle.classList.add('active');
      });
    }
    
    // add functionality to buttons
    for (const button of document.getElementsByClassName('button')) {
      button.addEventListener('click', function () {
        selectPage(button.dataset.page);
      });
    }

    function selectPage(page) {
      selected_page = page;
      for (const button of document.getElementsByClassName('button')) {
        if (button.dataset.page === selected_page
          && !button.classList.contains('left-menu-item-selected')) {
          button.classList.add('left-menu-item-selected');
        } else if (button.classList.contains('left-menu-item-selected')) {
          button.classList.remove('left-menu-item-selected');
        }
      };

      let container = document.getElementById('maincontent');
      let path = './.docs/' + page + '.html';
      container.innerHTML = '<iframe src="' + path + '"></iframe>';;
    }

    if (current_version) {
      console.log("CURENT VERSION: " + current_version);
      // selectPage("versions/" + current_version);
      selectPage("home.html");
    }
  </script>
</body>

</html>